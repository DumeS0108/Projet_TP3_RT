<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>GeoLoc Relay - Control Panel</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="api.css" /> 

   <script>
    // Si on est encore lÃ , c'est qu'on a le token. On affiche la page.
    document.body.style.display = "flex"; // Utilise flex pour correspondre Ã  ton CSS

    // FORCE LE REDESSIN DE LA CARTE
    if (typeof map !== 'undefined') {
        setTimeout(() => {
            map.invalidateSize();
        }, 100);
    }

    function logout() {
        localStorage.removeItem('token');
        window.location.href = "../index.html";
    }
    </script>
</head>

<body style="display: none;">

    <div id="sidebar">
        <h2>GeoLoc Relay</h2>
        
        <button onclick="logout()" style="background:#e74c3c; color:white; border:none; padding:10px; width:100%; cursor:pointer;">
            DÃ©connexion
        </button>
        
        <div class="status-card">
            <p>Statut Liaison : <span id="server-status">ðŸ”´ DÃ©connectÃ©</span></p>
            <hr>
            <p id="current-coords">Cliquez sur la carte...</p>
        </div>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="api.js"></script> 
    
    <script>
        // Si on est encore lÃ , c'est qu'on a le token. On affiche la page.
        document.body.style.display = "block";

        function logout() {
            localStorage.removeItem('token');
            window.location.href = "../index.html";
        }
    </script>
</body>
</html>